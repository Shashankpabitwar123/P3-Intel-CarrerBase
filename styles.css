:root{
  --bg:#061523; --bg2:#0d2b48; --text:#e7f2ff; --muted:#a8c4e7;
  --glass:rgba(255,255,255,.08); --glass-2:rgba(255,255,255,.12); --border:rgba(255,255,255,.15);
  --intel:#1f9cff; --intel-2:#7FDBFF; --radius:18px;

  --history:#5ad1ff; --innovation:#b0f; --energy:#ffd166; --water:#4cc9f0; --materials:#95f985; --goals:#b892ff;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  color:var(--text);
  background:
    radial-gradient(1200px 800px at 20% -10%, #0a2744 0%, transparent 60%),
    radial-gradient(1200px 800px at 120% 10%, #0a3e6b 0%, transparent 60%),
    linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
  overflow-x:hidden;
}

/* background canvas + grain */
#bg{position:fixed; inset:0; width:100%; height:100%; z-index:-2;}
.noise{pointer-events:none; position:fixed; inset:0; z-index:-1;
  background-image:url("data:image/svg+xml;utf8,\
  <svg xmlns='http://www.w3.org/2000/svg' width='140' height='140'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/></filter><rect width='100%' height='100%' filter='url(%23n)' opacity='.06'/></svg>");
  mix-blend-mode:overlay;
}

/* hero */
.hero{padding: clamp(32px,6vw,72px) 20px 8px;}
.hero-inner{max-width:1100px; margin:0 auto; text-align:center;}
.intel-logo{width:180px; filter: drop-shadow(0 8px 30px rgba(31,156,255,.45));}
h1{margin:8px 0 8px; font-size: clamp(32px,5.2vw,64px); text-transform:uppercase; letter-spacing:.4px; line-height:1.05; font-weight:800;}
h1 span{background:linear-gradient(90deg,var(--intel-2),var(--intel)); -webkit-background-clip:text; background-clip:text; color:transparent; text-shadow:0 0 30px rgba(31,156,255,.35);}
.lead{margin: 0 auto; color:var(--muted); max-width:820px; font-size: clamp(14px,1.8vw,18px);}
.hint{opacity:.85; color:var(--muted); margin-top:8px;}

/* filters */
.filters{max-width:1100px; margin: 12px auto 6px; display:flex; gap:12px; align-items:center; justify-content:space-between; padding:0 20px; flex-wrap:wrap;}
.legend{display:flex; gap:14px; align-items:center; font-size:13.5px; color:var(--muted);}
.dot{display:inline-block; width:10px; height:10px; border-radius:50%; margin-right:6px; box-shadow:0 0 12px currentColor;}
.dot.history{color:var(--history); background:var(--history)}
.dot.innovation{color:var(--innovation); background:var(--innovation)}
.dot.energy{color:var(--energy); background:var(--energy)}
.dot.water{color:var(--water); background:var(--water)}
.dot.materials{color:var(--materials); background:var(--materials)}
.dot.goals{color:var(--goals); background:var(--goals)}
.controls{display:flex; gap:10px; align-items:center;}
.search{position:relative; display:flex; align-items:center;}
.search input{
  width:min(50vw,360px); background:var(--glass); border:1px solid var(--border); color:var(--text);
  padding:10px 36px 10px 12px; border-radius:999px; outline:none; backdrop-filter:blur(6px);
  box-shadow:0 8px 24px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.06);
}
.search svg{width:18px; position:absolute; right:12px; opacity:.7;}
.pill{appearance:none; border:1px solid var(--border); background:var(--glass); color:var(--text); padding:10px 14px; border-radius:999px; cursor:pointer; backdrop-filter:blur(6px);}

/* timeline rail */
.timeline{position:relative;}
.rail{
  display:flex; gap:22px; padding: 16px 20px 16px;
  overflow-x:auto; overflow-y:hidden; scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch;
}
.rail::-webkit-scrollbar{height:10px;}
.rail::-webkit-scrollbar-thumb{background:linear-gradient(90deg,#1a6fd6,#27b0ff); border-radius:999px;}
.rail::-webkit-scrollbar-track{background:transparent;}

/* card */
.card{
  position:relative; min-width:320px; max-width:360px; flex:0 0 auto;
  background:
    radial-gradient(100% 140% at 0% 0%, rgba(31,156,255,.18) 0, transparent 60%),
    radial-gradient(120% 120% at 100% 100%, rgba(127,219,255,.12) 0, transparent 65%),
    rgba(255,255,255,.04);
  border:1px solid var(--border); border-radius:var(--radius); padding:14px; scroll-snap-align:start;
  box-shadow:0 20px 50px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.05);
  transform-style:preserve-3d; transition:transform .2s ease, box-shadow .25s ease, background .25s ease, outline .25s ease;
  --rx:0deg; --ry:0deg; transform:rotateX(var(--rx)) rotateY(var(--ry));
}
.card:hover{box-shadow:0 24px 70px rgba(31,156,255,.25), inset 0 0 0 1px rgba(255,255,255,.08);}
.imgwrap{border-radius: calc(var(--radius) - 6px); overflow:hidden; height:180px; position:relative; box-shadow: inset 0 0 0 1px rgba(255,255,255,.06); background: rgba(255,255,255,.03);}
.svgwrap{width:100%; height:100%;}
.card .year{position:absolute; top:10px; left:10px; background:rgba(0,0,0,.35); padding:6px 10px; border-radius:999px; font-weight:800; border:1px solid rgba(255,255,255,.2); backdrop-filter:blur(4px);}
.card h3{margin:10px 6px 2px; font-size:20px;}
.card p{margin:0 6px 10px; color:var(--muted); font-size:14px;}
.card .chip{display:inline-block; margin:8px 6px 10px; padding:6px 10px; border-radius:999px; font-size:12px; border:1px solid var(--border); background:var(--glass); backdrop-filter:blur(6px);}
.card .more{display:inline-flex; align-items:center; gap:8px; margin: 2px 6px 2px; cursor:pointer; color:#d8ecff; text-decoration:none; font-weight:600;}
.card .more svg{width:18px; height:18px;}

/* reveal-on-hover summary */
.card .reveal{
  position:absolute; inset:auto 10px 10px 10px; border-radius:14px;
  background:rgba(6,21,35,.82); border:1px solid rgba(255,255,255,.12);
  padding:10px 12px; color:#cfe6ff; font-size:13px; line-height:1.35;
  opacity:0; transform: translateY(6px); transition: opacity .25s ease, transform .25s ease;
}
.card:hover .reveal, .card:focus-within .reveal{ opacity:1; transform:none; }

/* active glow for the clicked/opened card */
@keyframes cardPulse {
  0%{ box-shadow:0 0 0 2px rgba(31,156,255,.7), 0 0 24px rgba(31,156,255,.35), inset 0 0 0 1px rgba(255,255,255,.1); }
  50%{ box-shadow:0 0 0 3px rgba(31,156,255,.9), 0 0 38px rgba(31,156,255,.55), inset 0 0 0 1px rgba(255,255,255,.14); }
  100%{ box-shadow:0 0 0 2px rgba(31,156,255,.7), 0 0 24px rgba(31,156,255,.35), inset 0 0 0 1px rgba(255,255,255,.1); }
}
.card.active-glow{
  transform: translateZ(26px) scale(1.015);
  animation: cardPulse 1.8s ease-in-out infinite;
  outline: 2px solid rgba(31,156,255,.85);
  outline-offset: 0px;
}

/* category tints */
.card[data-cat="history"] .chip{color:var(--history)}
.card[data-cat="innovation"] .chip{color:var(--innovation)}
.card[data-cat="energy"] .chip{color:var(--energy)}
.card[data-cat="water"] .chip{color:var(--water)}
.card[data-cat="materials"] .chip{color:var(--materials)}
.card[data-cat="goals"] .chip{color:var(--goals)}

/* single slider */
.scrubber{padding: 10px 20px 24px;}
.scrubber input[type="range"]{-webkit-appearance:none; width:100%; background:transparent;}
.scrubber input[type="range"]::-webkit-slider-runnable-track{height:8px; border-radius:999px; background:linear-gradient(90deg, #1a6fd6,#27b0ff);}
.scrubber input[type="range"]::-moz-range-track{height:8px; border-radius:999px; background:linear-gradient(90deg, #1a6fd6,#27b0ff);}
.scrubber input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none; margin-top:-6px; width:20px; height:20px; border-radius:50%; background:#fff; box-shadow:0 3px 12px rgba(0,0,0,.35); border:2px solid #27b0ff; cursor:pointer;}
.scrubber input[type="range"]::-moz-range-thumb{width:20px; height:20px; border-radius:50%; background:#fff; border:2px solid #27b0ff; cursor:pointer;}

/* modal */
.modal{position:fixed; inset:0; pointer-events:none;}
.modal-backdrop{position:absolute; inset:0; background:rgba(0,8,20,.65); opacity:0; transition:opacity .25s ease; z-index:1; cursor:pointer;}
.modal-card{
  position:relative; z-index:2; max-width:min(980px,92vw); margin:8vh auto; display:grid; grid-template-columns:1.2fr 1fr; gap:0;
  background:rgba(10,20,35,.95); border:1px solid var(--border); border-radius:22px;
  box-shadow:0 0 0 3px rgba(31,156,255,.9), 0 0 70px rgba(31,156,255,.45), 0 40px 120px rgba(0,0,0,.6);
  transform:translateY(12px) scale(.98); opacity:0; transition:transform .25s ease, opacity .25s ease; overflow:hidden; backdrop-filter: blur(10px);
}
.modal[aria-hidden="false"]{pointer-events:auto;}
.modal[aria-hidden="false"] .modal-backdrop{opacity:1;}
.modal[aria-hidden="false"] .modal-card{transform:none; opacity:1;}
.modal-media{min-height:320px; position:relative;}
.modal-body{padding:18px 20px 22px;}
.modal-body h2{margin:6px 0 6px; font-size: clamp(22px,2.5vw,30px);}
.modal-body h3{margin:0 0 10px; color:var(--muted); font-weight:600;}
.modal-body p{color:var(--text); opacity:.95; line-height:1.6;}
.modal-close{position:absolute; top:10px; right:10px; z-index:3; cursor:pointer;}
.svgwrap{width:100%; height:100%;}

/* vertical mode */
@media (max-width:760px){
  .rail{flex-direction:column; overflow-x:hidden; overflow-y:auto; scroll-snap-type:y mandatory; max-height:72vh; padding-bottom: 0;}
  .card{min-width:auto; width:92%; margin: 0 auto;}
  .modal-card{grid-template-columns:1fr; margin:5vh auto;}
}

@media (prefers-reduced-motion: reduce){
  .card, .modal-card{transition:none!important;}
}


/* --- Intro glow for Intel logo and modal pulse while open --- */
.intel-logo.glow-on{
  filter: drop-shadow(0 0 8px rgba(31,156,255,.9)) drop-shadow(0 0 22px rgba(31,156,255,.45));
  animation: cardPulse 2.2s ease-in-out 1;
}
.modal[aria-hidden="false"] .modal-card{
  animation: cardPulse 1.8s ease-in-out infinite;
}
/* Make sure the close (âœ•) sits above everything and is clickable */
.modal-close{
  pointer-events:auto;
  z-index: 5;
}


/* --- Stronger close button hit target --- */
.modal-close{
  position:absolute; top:10px; right:10px;
  width:40px; height:40px; display:grid; place-items:center;
  font-size:20px; line-height:1; border-radius:12px;
  background:rgba(255,255,255,0.06);
  border:1px solid rgba(255,255,255,0.12);
  backdrop-filter: blur(6px);
  z-index: 9999; /* stay above any overlay */
}
.modal-close:hover{ filter:brightness(1.2); }
.modal-close:active{ transform:scale(0.96); }
